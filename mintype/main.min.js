function scene1() { function e() { var e = setInterval(function () { $(".mdmotion span").eq(c).show(), c++ , c > 14 && (clearInterval(e), c = 0, n()) }, 80) } function n() { var e = setInterval(function () { $(".scene1 span").css("opacity", 1 - .1 * c), c++ , c > 10 && (clearInterval(e), c = 0, $(".scene1").css("display", "none"), $(".scene2").fadeIn(), scene2()) }, 50) } $(".scene1").show(); var c = 0; console.log("场景1"); var t = setInterval(function () { $(".gd span").eq(c).show(), c++ , c > 1 && (clearInterval(t), c = 0, e()) }, 500) } function scene2() { console.log("场景2"), $(".scene2>.circle1").addClass("circle1Ani"), $(".scene2>.circle2").addClass("circle2Ani"), $(".scene2>.circle3").addClass("circle3Ani"), setTimeout(function () { $(".scene2>.circle1").animate({ width: 0, height: 0 }, 400), $(".scene2>.circle2").animate({ width: 0, height: 0 }, 400), $(".scene2>.circle3").animate({ width: 0, height: 0 }, 400, function () { scene3() }) }, 3e3) } function scene3() { console.log("场景3"), $(".scene2").css("display", "none"), $(".scene3>.circle4").addClass("circle4Ani"), $(".scene3").fadeIn(), setTimeout(function () { $(".circle4").animate({ width: 300, height: 300, borderRadius: 5 }, 800, function () { to4pieces() }) }, 800) } function to4pieces() { var e = 0; $(".circle4>div").addClass("fourpieces"); var n = setInterval(function () { var c = .1 * e; $(".circle4").css({ background: "rgba(255,255,255," + (1 - c) + ")" }), $(".circle4>div").css("background", "rgba(255,255,255," + c + ")"), e++ , e > 10 && (clearInterval(n), piecesMove()) }, 30) } function piecesMove() { var e = 0, n = setInterval(function () { $(".circle4>div").css({ "border-radius": e }), e++ , e > 70 && (clearInterval(n), fourroundtoone()) }, 6) } function fourroundtoone() { var e = 0, n = setInterval(function () { $(".circle4").css("transform", "rotate(" + 2.4 * e + "deg)"), $(".circle4>div:first").css("transform", "translate(" + e + "px," + e + "px)"), $(".circle4>div:nth-child(2)").css("transform", "translate(" + -e + "px," + e + "px)"), $(".circle4>div:nth-child(3)").css("transform", "translate(" + e + "px," + -e + "px)"), $(".circle4>div:nth-child(4)").css("transform", "translate(" + -e + "px," + -e + "px)"), e++ , e > 94 && (clearInterval(n), scene4()) }) } function scene4() { console.log("场景4"), $(".scene3").animate({ top: "-100%" }, 400), $(".scene4").animate({ top: "-100%" }, 400, function () { bounceball() }) } function bounceball() { $(".scene4>.ball").show(), $(".ball").addClass("ballmove"), $(".baffle").addClass("baffleAni"), setTimeout(function () { $(".scene5>.circle5").show(), s4tos5() }, 5e3) } function s4tos5() { var e = 0, n = setInterval(function () { $(".scene5").css("background", "linear-gradient(to right,rgba(238, 61, 41)" + e + "%,rgb(13, 194, 37) 0%)"), e++ , e > 100 && (clearInterval(n), $(".scene5").css("position", "relative"), $(".scene3").hide(), $(".scene4").css("display", "none"), scene5()) }, 1) } function scene5() { console.log("场景5"), $(".scene5>.circle5>.axis").show(), $(".scene5>.circle5>.axis div").show(), $(".scene5>.circle5>.axis div:first").stop(!1, !0).animate({ width: "150px", height: "150px" }, 1e3, function () { circle6Bigger() }), $(".scene5>.circle5>.axis div:last").stop(!1, !0).animate({ width: "150px", height: "150px" }, 1e3), $(".scene5>.circle5").addClass("circle5Ani"), $(".scene5>.circle5>.axis").addClass("axisrotate") } function circle6Bigger() { $(".scene5 .circle6").animate({ width: 5e3, height: 5e3 }, 300, function () { $(".scene5").hide(), $(".scene6").show(), scene6() }) } function scene6() { console.log("场景6"), setTimeout(function () { $(".scene6 .dial img").fadeIn() }, 1300), setTimeout(function () { nextAni(), $("#scene6tip").fadeIn(), $(".scene7").show(), $(".scene7>div").hide() }, 1300) } function nextAni() { var e = !1, n = 0, c = new Audio("./1368.mp3"); $(".scene6 .dial").on("click", function () { if (c.play(), $("#scene6tip").fadeOut(), !e) { e = !0, $(".scene6 .dial img").addClass("dialimgAni"); var t = setInterval(function () { $(".scene6 .outercircle .dial .innercircle").css("backgroundColor", "rgba(0, 0, 0, " + .016 * n + ")"), $(".scene6 .outercircle").css("backgroundColor", "rgba(0, 0, 0, " + .025 * n + ")"), n++ , n > 10 && (c.pause(), clearInterval(t), toscene7()) }, 100) } }) } function toscene7() { $(".scene6 .dial img").animate({ width: 0, height: 0 }, 400), $(".scene6 .outercircle").animate({ width: 0, height: 0 }, 600, function () { $(".scene6 .outercircle").hide(), scene7() }) } function scene7() { console.log("场景7"), $(".scene7>div").show(), $(".scene7").animate({ left: "0%" }, 600, function () { scene8() }) } function scene8() { console.log("场景8"), $(".scene8").show(), $(".scene8").animate({ left: "0%" }, 600), $(".scene7").animate({ left: "100%" }, 600, function () { slideBlockMove() }) } function slideBlockMove() { var e = 0, n = setInterval(function () { $(".scene8 .progressbar").css("background", "linear-gradient(to right,rgb(0, 60, 255) " + e + "%,#fff 0%)"), $(".scene8 .indicator").html(e + "%"), $(".scene8 .indicator").css("left", 20 + .6 * e + "%"), e++ , e > 100 && (clearInterval(n), scene9()) }, 15) } function scene9() { console.log("场景9"), $("body").css("background", "rgb(48, 255, 255)"), $(".scene6,.scene7").fadeOut(), $(".scene8").animate({ left: "100%" }, 600), $(".scene9").show(), $(".scene9").animate({ left: "0%" }, 600); var e = document.createElement("canvas"); e.width = window.innerWidth, e.height = window.innerHeight, e.style.background = "rgba(0,0,0,0)", e.setAttribute("id", "canvas"), $(".scene9").append(e), drawBallMove(), setTimeout(function () { scene9Move() }, 3600) } function drawBallMove() { function e(e) { this.canvas = document.getElementById(e.canvas.id), this.ctx = this.canvas.getContext("2d"), this.width = this.canvas.width, this.height = this.canvas.height, this.title = e.text, this.xAxis = e.data, this.series = e.series } for (var n = [300 * Math.random()], c = 1; c < 10; c++)n.push(Math.round(20 * (Math.random() - .5) + n[c - 1])); option = { canvas: { id: "canvas" }, series: { itemStyle: { color: "#78909c" }, areaStyle: { color: "rgb(255, 158, 68)" }, data: n } }; var t = [], i = 0; e.prototype.initData = function () { t = [{ cAx: -79.61999999999999, cAy: null, cBx: -53.08, cBy: null, nowX: 0, nowY: 0, t: 0 }, { cAx: 26.54, cAy: 100, cBx: 79.61999999999999, cBy: 268.8, nowX: 132.7, nowY: 336, t: 0 }, { cAx: 185.77999999999997, cAy: 403.2, cBx: 212.32, cBy: 305.4, nowX: 265.4, nowY: 336, t: 0 }, { cAx: 318.47999999999996, cAy: 366.6, cBx: 345.02, cBy: 489, nowX: 398.09999999999997, nowY: 489, t: 0 }, { cAx: 451.17999999999995, cAy: 489, cBx: 477.7199999999999, cBy: 320.6, nowX: 530.8, nowY: 336, t: 0 }, { cAx: 583.88, cAy: 351.4, cBx: 610.42, cBy: 535.4, nowX: 663.5, nowY: 546, t: 0 }, { cAx: 716.58, cAy: 546, cBx: 743.12, cBy: 512, nowX: 796.1999999999999, nowY: 489, t: 0 }, { cAx: 849.2799999999999, cAy: 466, cBx: 875.8199999999998, cBy: 489.4, nowX: 928.8999999999999, nowY: 451, t: 0 }, { cAx: 981.9799999999999, cAy: 412.6, cBx: 1008.5199999999999, cBy: 335.4, nowX: 1061.6, nowY: 297, t: 0 }, { cAx: 1114.6799999999998, cAy: 258.6, cBx: 1167.76, cBy: 266.6, nowX: 1194.3, nowY: 259, t: 0 }, { cAx: 1250, cAy: 260, cBx: 1200, cBy: 270, nowX: windowWidth + 100, nowY: 300, t: 0 }, { cAx: windowWidth, cAy: windowHeight, cBx: windowWidth + 100, cBy: windowHeight + 100, nowX: windowWidth + 100, nowY: windowHeight + 100, t: 0 }, { cAx: windowWidth, cAy: windowHeight, cBx: windowWidth + 100, cBy: windowHeight + 100, nowX: -100, nowY: windowHeight + 100, t: 0 }] }, e.prototype.draw = function () { var e = this; this.ctx.beginPath(), t.forEach(function (n, c) { var t = n.cAx, i = n.cAy, s = n.cBx, a = n.cBy, o = n.nowX, r = n.nowY; e.ctx.bezierCurveTo(t, i, s, a, o, r) }); var n = this.ctx.createLinearGradient(0, 0, 0, this.width); n.addColorStop(0, this.series.areaStyle.color), n.addColorStop(1, this.series.itemStyle.color), this.ctx.strokeStyle = this.series.itemStyle.color, this.ctx.fillStyle = "#78909c", this.ctx.fill(), this.ctx.stroke() }, e.prototype.drawBall = function () { var e = this, n = t[i], c = n.cAx, a = n.cAy, o = n.cBx, r = n.cBy, l = n.nowX, d = n.nowY, h = 0, u = 0; if (0 === i ? (h = 0, u = 0) : (h = t[i - 1].nowX, u = t[i - 1].nowY), n.t > 1) i++; else { e.ctx.clearRect(0, 0, e.width, e.height), n.t += .05; var w = h * Math.pow(1 - n.t, 3) + 3 * c * n.t * Math.pow(1 - n.t, 2) + 3 * o * Math.pow(n.t, 2) * (1 - n.t) + l * Math.pow(n.t, 3), f = u * Math.pow(1 - n.t, 3) + 3 * a * n.t * Math.pow(1 - n.t, 2) + 3 * r * Math.pow(n.t, 2) * (1 - n.t) + d * Math.pow(n.t, 3); s.draw(), e.ctx.beginPath(), e.ctx.arc(w, f, 30, 0, 2 * Math.PI, !1), e.ctx.fillStyle = "#5e3ad0", e.ctx.fill() } i !== t.length && window.requestAnimationFrame(s.drawBall.bind(e)) }; var s = new e(option); s.initData(), s.drawBall() } function scene9Move() { $(".scene9").animate({ left: "-100%" }, 600, function () { scene10() }) } function scene10() { console.log("场景10"), $(".scene10 .circle7 .circle8").hide(), $(".scene10").fadeIn(300), $(".scene10").animate({ left: "0%" }, 300), $(".scene6,.scene7,.scene8,.scene9").fadeOut(), setTimeout(function () { dropBall() }, 2e3) } function dropBall() { $(".scene10 .circle7 .circle8").show(), $(".scene10 .circle7").addClass("dropball"), $(".scene10 .circle7").animate({ width: "800px", height: "800px" }, 2e3, function () { ballRotate() }) } function ballRotate() { setTimeout(function () { $(".scene10 .circle7 .circle8").animate({ width: "50px", height: "50px", top: "0%" }, 400, function () { $(".scene10 .circle7 .circle8").css("background", "rgb(255, 100, 100)"), $(".scene10 .circle7 .c8axis").addClass("c8axisrotate"), $(".scene10 .circle7 .c8axis").on("animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oAnimationEnd", function () { nextBallRotate() }) }) }, 2e3) } function nextBallRotate() { $(".scene10 .circle7 .c8axis").removeClass("c8axisrotate"), $(".scene10 .circle7 .c8axis").addClass("c8axisrotate2"), $(".circleProgress_wrapper .rightcircle").addClass("rightcircle2"), $(".circleProgress_wrapper .leftcircle").addClass("leftcircle2"), $(".scene10 .circle7 .c8axisrotate2").on("animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oAnimationEnd", function () { ballBigger() }) } function ballBigger() { $(".scene10 .circle7 .circle8").animate({ width: "3000px", height: "3000px", top: "50%" }, 600, function () { $("body").css("background", "rgb(255, 100, 100)"), scene11() }) } function scene11() { $(".scene11").fadeIn(), $(".scene10").fadeOut(), setTimeout(function () { ballRaise() }, 300) } function ballRaise() { $(".ballraise").animate({ top: "50%" }, 600, function () { endScene() }) } function endScene() { $(".topmask,.bottommask").show(), setTimeout(function () { $(".ballraise").addClass("balltorect") }, 600), setTimeout(function () { $(".topmask").animate({ top: "0%" }, 300), $(".bottommask").animate({ top: "50%" }, 300) }, 2e3), setTimeout(function () { $("#endstr").show(), endThanks() }, 3e3) } function endThanks() { var e = "Thanks for visited", n = 0, c = setInterval(function () { var t = $("<span></span>"); " " == e[n] ? t.html("&nbsp;") : t.html(e[n]), $("#endstr").append(t), n++ , n > e.length && (clearInterval(c), n = 0, end = !0) }, 100) } $(".scene1").hide(), $(".scene1 span").hide(), $(".scene2").hide(), $(".scene3").hide(), $(".scene4>.ball").hide(), $(".scene5>.circle5>.axis").hide(), $(".scene6").hide(), $(".scene6 .dial img").hide(), $("#scene6tip").hide(), $(".scene7").hide(), $(".scene8").hide(), $(".scene9").hide(), $(".scene10").hide(), $(".scene11").hide(), $(".topmask,.bottommask").hide(), $(".scene11 #endstr").hide(); var windowWidth = window.innerWidth, windowHeight = window.innerHeight; scene1();